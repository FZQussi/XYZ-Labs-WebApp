<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - XYZ Labs</title>
  <link rel="stylesheet" href="../css/base.css">
<link rel="stylesheet" href="../css/layout.css">
<link rel="stylesheet" href="../css/dashboard.css">
<link rel="stylesheet" href="../css/users.css">
<link rel="stylesheet" href="../css/products.css">
<link rel="stylesheet" href="../css/forms.css">
<link rel="stylesheet" href="../css/modals.css">
<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

</head>
<body>
  <aside class="sidebar">
    <h2>Admin</h2>
    <button data-tab="users">Utilizadores</button>
    <button data-tab="products">Produtos</button>
    <button id="logoutBtn">Logout</button>
  </aside>

  <main>
    <div id="welcomeMsg" class="welcome"></div>

    <!-- ABA DE UTILIZADORES -->
    <section id="users" class="tab hidden">
      <h2>Gestão de Utilizadores</h2>
      <div id="usersList"></div>
    </section>

 <!-- ABA DE PRODUTOS -->
<section id="products" class="tab hidden">
  <h2>Gestão de Produtos</h2>

  <!-- FILTROS + AÇÕES -->
  <div class="products-toolbar">
    <input
      type="text"
      id="productSearch"
      placeholder="Pesquisar produto..."
    />

    <select id="productFilterActive">
      <option value="">Todos</option>
      <option value="true">Ativos</option>
      <option value="false">Inativos</option>
    </select>

    <button id="addProductBtn" class="primary-btn">
      + Novo Produto
    </button>
  </div>

  <!-- LISTA / TABELA -->
  <div class="products-table">
    <div class="table-header">
      <span>Nome</span>
      <span>Preço</span>
      <span>Stock</span>
      <span>Estado</span>
      <span>Ações</span>
    </div>

    <div id="productsList" class="table-body">
      <!-- produtos renderizados via JS -->
    </div>
  </div>

  <!-- PAGINAÇÃO -->
  <div class="pagination">
    <button id="prevPage">←</button>
    <span id="currentPage">1</span>
    <button id="nextPage">→</button>
  </div>
</section>

<!-- ================= MODAL: CRIAR PRODUTO ================= -->
<div id="createProductModal" class="modal hidden">
  <div class="modal-content">
    <span class="close" data-close="create">&times;</span>

    <h3>Novo Produto</h3>

    <form id="createProductForm">
      <div class="form-group">
        <label>Nome</label>
        <input type="text" id="createName" required>
      </div>

      <div class="form-group">
        <label>Preço (€)</label>
        <input type="number" id="createPrice" step="0.01" required>
      </div>

      <div class="form-group">
        <label>Descrição</label>
        <textarea id="createDescription" rows="4" required></textarea>
      </div>

        <div class="form-group">
        <label>Categoria</label>
        <select id="createCategory">
            <option value="">-- Seleciona categoria --</option>
        </select>
        </div>

        <div class="form-group">
        <label>Subcategoria</label>
        <select id="createSubcategory">
            <option value="">-- Seleciona subcategoria --</option>
        </select>
        </div>



      <div class="form-group">
        <label>Stock</label>
        <input type="number" id="createStock" min="0">
      </div>

      <div class="form-group">
  <label>Ficheiros 3D e Imagens</label>
  <input type="file" id="createModelFile" name="modelFile" accept=".glb">
<input type="file" id="createImages" name="images" accept="image/*" multiple>

  <small>Podes adicionar até 4 imagens.</small>
</div>


      <button type="submit" class="primary-btn">
        Criar Produto
      </button>
    </form>
  </div>
</div>

<!-- ================= MODAL: EDITAR / ELIMINAR ================= -->
<div id="editProductModal" class="modal hidden">
  <div class="modal-content">
    <span class="close" data-close="edit">&times;</span>

    <h3>Editar Produto</h3>

    <form id="editProductForm">
      <input type="hidden" id="editId">

      <div class="form-group">
        <label>Nome</label>
        <input type="text" id="editName" required>
      </div>

      <div class="form-group">
        <label>Preço (€)</label>
        <input type="number" id="editPrice" step="0.01" required>
      </div>

      <div class="form-group">
        <label>Descrição</label>
        <textarea id="editDescription" rows="4" required></textarea>
      </div>

   <div class="form-group">
  <label>Categoria</label>
  <select id="editCategory">
    <option value="">-- Seleciona categoria --</option>
  </select>
</div>

<div class="form-group">
  <label>Subcategoria</label>
  <select id="editSubcategory">
    <option value="">-- Seleciona subcategoria --</option>
  </select>
</div>



      <div class="form-group">
        <label>Stock</label>
        <input type="number" id="editStock" min="0">
      </div>

      <div class="form-group">
        <label>Novo ficheiro 3D (.glb)</label>
        <input type="file" id="editFile" accept=".glb">
      </div>

      <div class="modal-actions">
        <button type="submit" class="primary-btn">
          Guardar Alterações
        </button>

        <button type="button" id="deleteProductBtn" class="danger-btn">
          Eliminar
        </button>
      </div>
    </form>
  </div>
</div>
<!-- ===== MODAL: DETALHES PRODUTO ===== -->
<div id="viewProductModal" class="modal hidden">
  <div class="modal-content modal-large">
    <span class="close" data-close="view">&times;</span>

    <h3 id="viewName"></h3>

    <div class="product-details-grid">
      <!-- Lado esquerdo: informações -->
      <div class="product-info">
        <p><strong>Preço:</strong> €<span id="viewPrice"></span></p>
        <p><strong>Stock:</strong> <span id="viewStock"></span></p>
        <p><strong>Estado:</strong> <span id="viewStatus"></span></p>
        <p><strong>Descrição:</strong> <span id="viewDescription"></span></p>
        <p><strong>Categoria:</strong> <span id="viewCategory"></span></p>
        <p><strong>Subcategoria:</strong> <span id="viewSubcategory"></span></p>
      </div>

      <!-- Lado direito: modelo 3D + imagens -->
      <div class="product-media">
        <model-viewer
          id="viewModel"
          src="..."
          alt="Modelo 3D"
          auto-rotate
          camera-controls
          shadow-intensity="1"
          style="width:100%; height:300px; background-color:#4c4c4c; border-radius:8px;"
        ></model-viewer>

        <div class="product-images">
          <img id="productImg1" src="" alt="Imagem 1" />
          <img id="productImg2" src="" alt="Imagem 2" />
          <img id="productImg3" src="" alt="Imagem 3" />
          <img id="productImg4" src="" alt="Imagem 4" />
        </div>
      </div>
    </div>
  </div>
</div>


      </div>
    </div>
  </div>
</div>

  </main>


  <script src="../scripts/dashboard.js"></script>
  <script src="../scripts/users.js"></script>
  <script src="../scripts/products.js"></script>
  <script src="../scripts/categories.js"></script>
  <script src="../scripts/subcategories.js"></script>
  <script src="../scripts/createproduct.js"></script>
  <script src="../scripts/editproduct.js"></script>
    <script src="../scripts/viewproduct.js"></script>
</body>
</html>
